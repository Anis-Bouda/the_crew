import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;

import javax.swing.BorderFactory;
import javax.swing.BoxLayout;
import javax.swing.ImageIcon;
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JMenu;
import javax.swing.JMenuBar;
import javax.swing.JMenuItem;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.KeyStroke;

public class MainLayout extends JPanel {

    public MainLayout() {
        // Set layout to BorderLayout (√©quivalent √† BorderPane en JavaFX)
        setLayout(new BorderLayout());
       
        // üîπ Liste des composants support√©s (Placeholder Panel)
        JPanel composants = new JPanel();
        composants.add(new JLabel("Composants ici")); // Ajout d'un label pour √©viter qu'il soit vide

        // üîπ Panneau de contr√¥le avec boutons "Run", "Stop", "Fil"
        JPanel control = new JPanel();
        control.add(new JButton("Run"));
        control.add(new JButton("Stop"));
        control.add(new JButton("Fil"));

        // üîπ Zone pour afficher les propri√©t√©s des composants
        JPanel propertiesArea = new PropertiesPanel;
        propertiesArea.setBorder(BorderFactory.createTitledBorder("Propri√©t√©s"));
        

        // üîπ Cr√©ation du panneau lat√©ral gauche (VBox en JavaFX ‚Üí BoxLayout en Swing)
        JPanel simulationControl = new JPanel();
        simulationControl.setLayout(new BoxLayout(simulationControl, BoxLayout.Y_AXIS));
        simulationControl.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
        simulationControl.add(control);
        simulationControl.add(new ComposantPanel()); // ‚úÖ Replace old composants with hierarchical list
        simulationControl.add(propertiesArea);

        add(simulationControl, BorderLayout.WEST);

        // üîπ Zone de conception des circuits (Placeholder)
        JPanel circuitDesignArea = new JPanel();
        circuitDesignArea.setBackground(Color.LIGHT_GRAY);
        circuitDesignArea.setBorder(BorderFactory.createTitledBorder("Zone de conception"));

        add(circuitDesignArea, BorderLayout.CENTER);
    }

    // Cr√©ation de la barre de menu
    public JMenuBar createMenuBar() {
        JMenuBar menuBar = new JMenuBar();
        
        // Menu File
        JMenu mnuFile = new JMenu("üìÅ Fichier");
        mnuFile.setMnemonic('F');
        
        // MenuItem "New File"
        JMenuItem mnuNewFile = new JMenuItem("New File");
        mnuNewFile.setIcon(new ImageIcon(getClass().getResource("/icons1/new.png")));  // Assurez-vous du bon chemin
        mnuNewFile.setMnemonic('N');
        mnuNewFile.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_N, KeyEvent.CTRL_DOWN_MASK));
        mnuFile.add(mnuNewFile);
        
        // MenuItem "Open File"
        JMenuItem mnuOpenFile = new JMenuItem("Open File");
        mnuOpenFile.setIcon(new ImageIcon(getClass().getResource("/icons1/open.png")));  // Assurez-vous du bon chemin
        mnuOpenFile.setMnemonic('O');
        mnuOpenFile.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_O, KeyEvent.CTRL_DOWN_MASK));
        mnuFile.add(mnuOpenFile);
        
        // MenuItem "Save File"
        JMenuItem mnuSaveFile = new JMenuItem("Save File");
        mnuSaveFile.setIcon(new ImageIcon(getClass().getResource("/icons1/save.png")));  // Assurez-vous du bon chemin
        mnuSaveFile.setMnemonic('S');
        mnuSaveFile.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_S, KeyEvent.CTRL_DOWN_MASK));
        mnuFile.add(mnuSaveFile);
        
        // MenuItem "Exit"
        JMenuItem mnuExitFile = new JMenuItem("Exit");
        mnuExitFile.setIcon(new ImageIcon(getClass().getResource("/icons1/exit.png")));  // Assurez-vous du bon chemin
        mnuExitFile.setMnemonic('E');
        mnuExitFile.setAccelerator(KeyStroke.getKeyStroke(KeyEvent.VK_E, KeyEvent.CTRL_DOWN_MASK));
        mnuExitFile.addActionListener((e) -> ExitBtn(e));  // Appel de la m√©thode pour fermer l'application
        
        mnuFile.add(mnuExitFile); // Ajout du bouton "Exit" au menu

        // Ajout du menu "File" √† la barre de menu
        menuBar.add(mnuFile);
        
        return menuBar;
    }
 
    // M√©thode pour fermer l'application
    private void ExitBtn(ActionEvent e) {
        int a = JOptionPane.showConfirmDialog(MainLayout.this, "√ätes-vous s√ªr de vouloir quitter ?", "Confirmation", JOptionPane.YES_NO_OPTION);
        if(a == JOptionPane.YES_OPTION) {
            System.exit(0);  // Utilisez System.exit pour fermer l'application
        }
    }
}
